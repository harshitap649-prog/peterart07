<%- include('header') %>
<div class="admin-container">
  <div class="admin-header">
    <div class="admin-header-content">
      <div>
        <h1 class="admin-title">All Users</h1>
        <p class="admin-subtitle">View all registered users and their Gmail addresses</p>
      </div>
      <button onclick="showLogoutModal()" class="admin-logout-btn">
        <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M13 3H4C3.46957 3 2.96086 3.21071 2.58579 3.58579C2.21071 3.96086 2 4.46957 2 5V15C2 15.5304 2.21071 16.0391 2.58579 16.4142C2.96086 16.7893 3.46957 17 4 17H13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M17 10H7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M14 7L17 10L14 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Logout</span>
      </button>
    </div>
  </div>
  <a href="/admin" class="admin-back-btn">
    <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <span>Back to Dashboard</span>
  </a>
  <div class="admin-section">
    <div class="section-header">
      <h2 class="section-title">Registered Users</h2>
      <span class="section-count"><%= users.length %> users</span>
    </div>
    <% if (users.length === 0) { %>
      <div class="empty-state">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="#9ca3af" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M8.5 11C10.7091 11 12.5 9.20914 12.5 7C12.5 4.79086 10.7091 3 8.5 3C6.29086 3 4.5 4.79086 4.5 7C4.5 9.20914 6.29086 11 8.5 11Z" stroke="#9ca3af" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M23 21V19C22.9993 18.1137 22.7044 17.2528 22.1614 16.5523C21.6184 15.8519 20.8581 15.3516 20 15.13" stroke="#9ca3af" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M16 3.13C16.8604 3.35031 17.623 3.85071 18.1676 4.55232C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89318 18.7122 8.75608 18.1676 9.45769C17.623 10.1593 16.8604 10.6597 16 10.88" stroke="#9ca3af" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <h3>No users yet</h3>
        <p>Users will appear here when they register or log in</p>
      </div>
    <% } else { %>
      <div class="users-list">
        <% users.forEach(user => { %>
          <div class="user-card">
            <div class="user-avatar">
              <%= (user.email || 'U').charAt(0).toUpperCase() %>
            </div>
            <div class="user-info">
              <div class="user-email"><%= user.email %></div>
              <% if (user.name) { %>
                <div class="user-name"><%= user.name %></div>
              <% } %>
              <div class="user-date">Joined: <%= new Date(user.created_at).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }) %></div>
            </div>
            <div class="user-id-badge">ID: #<%= user.id %></div>
          </div>
        <% }) %>
      </div>
    <% } %>
  </div>
</div>
<div id="logoutModal" class="logout-modal-overlay" onclick="closeLogoutModal(event)">
  <div class="logout-modal-content" onclick="event.stopPropagation()">
    <div class="logout-modal-icon">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M16 17L21 12L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    <h2 class="logout-modal-title">Are you sure?</h2>
    <p class="logout-modal-message">You are about to logout from your admin account. This action will end your current session.</p>
    <div class="logout-modal-actions">
      <button onclick="closeLogoutModal()" class="logout-modal-cancel">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Cancel</span>
      </button>
      <button onclick="confirmLogout()" class="logout-modal-confirm">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M5 13L9 17L19 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Yes, Logout</span>
      </button>
    </div>
  </div>
</div>
<script>
function showLogoutModal() {
  document.getElementById('logoutModal').style.display = 'flex';
  document.body.style.overflow = 'hidden';
}
function closeLogoutModal(event) {
  if (event && event.target !== event.currentTarget) return;
  document.getElementById('logoutModal').style.display = 'none';
  document.body.style.overflow = '';
}
function confirmLogout() {
  window.location.href = '/logout';
}
</script>
<%- include('footer') %>
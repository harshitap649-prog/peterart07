<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title><%= typeof title !== 'undefined' ? title : 'Art Shop' %></title>
<link rel="stylesheet" href="/styles.css">
<script type="module" src="/firebase-init.js"></script>
</head>
<body>
<% if (typeof isAdmin === 'undefined' || !isAdmin) { %>
<header>
  <nav>
    <a href="/help" class="help-support-btn">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span>Help & Support</span>
    </a>
    <% if (typeof isLoggedIn !== 'undefined' && isLoggedIn) { %>
    <button onclick="showUserLogoutModal()" class="user-logout-btn">
      <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M13 3H4C3.46957 3 2.96086 3.21071 2.58579 3.58579C2.21071 3.96086 2 4.46957 2 5V15C2 15.5304 2.21071 16.0391 2.58579 16.4142C2.96086 16.7893 3.46957 17 4 17H13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M17 10H7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M14 7L17 10L14 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span>Logout</span>
    </button>
    <% } %>
  </nav>
</header>
<% if (typeof isLoggedIn !== 'undefined' && isLoggedIn) { %>
<div id="userLogoutModal" class="logout-modal-overlay" onclick="closeUserLogoutModal(event)">
  <div class="logout-modal-content" onclick="event.stopPropagation()">
    <div class="logout-modal-icon">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M16 17L21 12L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    <h2 class="logout-modal-title">Are you sure?</h2>
    <p class="logout-modal-message">You are about to logout from your account. This action will end your current session.</p>
    <div class="logout-modal-actions">
      <button onclick="closeUserLogoutModal()" class="logout-modal-cancel">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Cancel</span>
      </button>
      <button onclick="confirmUserLogout()" class="logout-modal-confirm">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M5 13L9 17L19 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Yes, Logout</span>
      </button>
    </div>
  </div>
</div>
<script>
function showUserLogoutModal() {
  document.getElementById('userLogoutModal').style.display = 'flex';
  document.body.style.overflow = 'hidden';
}
function closeUserLogoutModal(event) {
  if (event && event.target !== event.currentTarget) return;
  document.getElementById('userLogoutModal').style.display = 'none';
  document.body.style.overflow = '';
}
function confirmUserLogout() {
  window.location.href = '/logout';
}
</script>
<% } %>
<% } %>
<main>